//------------------------------------------------------------------------------
// <auto-generated>
// This code was generated by ServiceMatrix.
//
// Changes to this file may cause incorrect behavior and will be lost if
// the code is regenerated.
// </auto-generated>
//------------------------------------------------------------------------------

using System;
using NServiceBus;
using OnlineSales.Internal.Commands.Shipping;
using OnlineSales.Contracts.Sales;
using OnlineSales.Contracts.Billing;
using OnlineSales.Internal.Messages.Shipping;
using NServiceBus.Saga;


namespace OnlineSales.Shipping
{
    public partial class OrderAcceptedHandler : Saga<OrderAcceptedHandlerSagaData>, IOrderAcceptedHandler, ServiceMatrix.Shared.INServiceBusComponent, IAmStartedByMessages<OrderAccepted>, IAmStartedByMessages<BillingCompleted>, IHandleMessages<SubmitShipmentResponse>
    {
		
		public void Handle(OrderAccepted message)
		{
			// Store message in Saga Data for later use
			this.Data.OrderAccepted = message;
			// Handle message on partial class
			this.HandleImplementation(message);

			// Check if Saga is Completed 
			CheckIfAllMessagesReceived();
		}

		public void Handle(BillingCompleted message)
		{
			// Store message in Saga Data for later use
			this.Data.BillingCompleted = message;
			// Handle message on partial class
			this.HandleImplementation(message);

			// Check if Saga is Completed 
			CheckIfAllMessagesReceived();
		}

		partial void HandleImplementation(OrderAccepted message);

		partial void HandleImplementation(BillingCompleted message);

        public void Send(SubmitShipment message)
        {
            ConfigureSubmitShipment(message);
            Bus.Send(message);
        }

        partial void ConfigureSubmitShipment(SubmitShipment message);

        public void Handle(SubmitShipmentResponse message)
        {
            // Store message in Saga Data for later use
            this.Data.SubmitShipmentResponse = message;

            // Handle message on partial class
            this.HandleImplementation(message);

            // Check if Saga is Completed 
            CheckIfAllMessagesReceived();
        }

        partial void HandleImplementation(SubmitShipmentResponse message);

        public void CheckIfAllMessagesReceived()
        {
            if (this.Data.OrderAccepted != null && this.Data.BillingCompleted != null && this.Data.SubmitShipmentResponse != null)
            {
                AllMessagesReceived();
            }
        }

        partial void AllMessagesReceived();
     }

     public partial class OrderAcceptedHandlerSagaData : IContainSagaData
     {
           public virtual Guid Id { get; set; }
           public virtual string Originator { get; set; }
           public virtual string OriginalMessageId { get; set; }

           public virtual OrderAccepted OrderAccepted { get; set; }
           public virtual BillingCompleted BillingCompleted { get; set; }
           public virtual SubmitShipmentResponse SubmitShipmentResponse { get; set; }

    }

	
	public partial interface IOrderAcceptedHandler
    {
        
        void Send(SubmitShipment message);

	}

	
}
